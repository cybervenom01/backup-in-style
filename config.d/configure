#!/bin/sh
##TODO: Create Error Handling: Use set.
set -Eeuo pipefail

###
## Main Configuration File.
###

###
## Variables Configuration
#

ROOT_UID=0
E_UID=1


###
## Check if the configuration file is run as root.
#

if [ "$UID" -ne "$ROOT_UID" ]
then
	echo -e "\n\n"
	echo -e "Please run this script with \033[0;31mroot\033[0;0m privileges.\n\n"
	exit $E_UID
fi


###
## Searches for the commands which help to compress, archive, and remotely transfer your data.
#

echo -e "\nChecking for comands: \n"

LST_CMDS=( "tar" "zstd" "ssh" "scp" )

for CMDS in "${LST_CMDS[@]}";
do
	echo -e "$CMDS . . ."

        if ! command -v "$CMDS" > /dev/null 2>&1;
        then
                echo "$CMDS not found"
                echo "Please install the corresponding packages."
                exit 0
        fi
done

echo -e "All commands are account for."


##NOTE: You can copy the main script to '/usr/local/bin' directory.

###
## Copy main script into /usr/local/bin
## Make sure it has the correct file permissions
## and its executable.
#

cp ../backup-in-style.sh /usr/local/bin/bakupstyle

chmod 755 /usr/local/bin/bakupstyle


###
## Copy the ASCII Art into the /usr/share/BKStyle directory
#

ASCIILOC="/usr/share"
BKDIR="BakupStyle.d"
ASCIIDIR="AsciiArt"

mkdir -p ${ASCIILOC}/$BKDIR/$ASCIIDIR

cp -R ../ascii ${ASCIILOC}/$BKDIR/$ASCIIART
